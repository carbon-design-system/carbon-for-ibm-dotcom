import { Preview, Props, Description, Story } from '@storybook/addon-docs/blocks';
import contributing from '../../../../../../docs/contributing-license.md';

# Masthead

> The masthead component is a required navigational pattern for IBM.com that
> displays consistently at the top of each page. It also includes search and
> profile services for IBM.com.

> ðŸ’¡ Check our
> [CodeSandbox](https://githubbox.com/carbon-design-system/carbon-for-ibm-dotcom/tree/master/packages/web-components/examples/codesandbox/components/masthead)
> example implementation.

[![Edit @carbon/ibmdotcom-web-components](https://codesandbox.io/static/img/play-codesandbox.svg)](https://githubbox.com/carbon-design-system/carbon-for-ibm-dotcom/tree/master/packages/web-components/examples/codesandbox/components/masthead)

## Getting Started

### JS

```javascript
import '@carbon/ibmdotcom-web-components/es/components/masthead/masthead-container.js';
```

### HTML

```html
<dds-masthead-container></dds-masthead-container>
```

#### Setting Platform

```html
<dds-masthead-container brand-name="Lorem Ipsum"></dds-masthead-container>
```

#### Custom Navigation

```javascript
const links = [...menu items...];
document.getElementById('masthead-container').navLinks = links;
```

```html
<dds-masthead-container id="masthead-container"></dds-masthead-container>
```

## Stable selectors

See [our README](https://github.com/carbon-design-system/carbon-for-ibm-dotcom/tree/master/packages/web-components#stable-selectors-for-analytics-and-integratione2e-testing-in-web-components) to see how Web Components selector and `data-autoid` should be used.

| Web Components selector                                                                   | Compatibility selector                                                   | Description |
| ----------------------------------------------------------------------------------------- | ------------------------------------------------------------------------ | ----------- |
| `<dds-masthead>`                                                                          | `data-autoid="dds--masthead"`                                            | Component   |
| `<dds-masthead-menu-button>`                                                              | `data-autoid="dds--masthead__hamburger"`                                 | Interactive |
| `<dds-top-nav-name>`                                                                      | `data-autoid="dds--masthead__platform-name"`                             | Interactive |
| `<dds-top-nav>`                                                                           | `data-autoid="dds--masthead__l0-nav"`                                    | Component   |
| `<dds-top-nav-menu trigger-content="${item}">` and `<dds-top-nav-item title="${item}">`   | `data-autoid="dds--masthead__l0-nav--nav-${item}"`                       | Interactive |
| `<dds-top-nav-menu-item title="${item}">`                                                 | `data-autoid="dds--masthead__l0-nav--subnav-col${item}-item${item}"`     | Interactive |
| `<dds-left-nav>`                                                                          | `data-autoid="dds--masthead__l0-sidenav"`                                | Component   |
| `<dds-left-nav-menu trigger-content="${item}">` and `<dds-left-nav-item title="${item}">` | `data-autoid="dds--masthead__l0-sidenav--nav-${item}"`                   | Interactive |
| `<dds-left-nav-menu-item title="${item}">`                                                | `data-autoid="dds--masthead__l0-sidenav--subnav-col${item}-item${item}"` | Interactive |

## Advanced: Rendering masthead content by your own

You can also render the masthead content by your own, e.g. for server-side rendering, like:

> ðŸ’¡ Check our
> [CodeSandbox](https://githubbox.com/carbon-design-system/carbon-for-ibm-dotcom/tree/master/packages/web-components/examples/codesandbox/components/masthead-search)
> example implementation.

[![Edit @carbon/ibmdotcom-web-components](https://codesandbox.io/static/img/play-codesandbox.svg)](https://githubbox.com/carbon-design-system/carbon-for-ibm-dotcom/tree/master/packages/web-components/examples/codesandbox/components/masthead-search)

##### JS

```javascript
import '@carbon/ibmdotcom-web-components/es/components/masthead/masthead.js';
import '@carbon/ibmdotcom-web-components/es/components/masthead/masthead-menu-button.js';
import '@carbon/ibmdotcom-web-components/es/components/masthead/masthead-logo.js';
import '@carbon/ibmdotcom-web-components/es/components/masthead/top-nav.js';
import '@carbon/ibmdotcom-web-components/es/components/masthead/top-nav-item.js';
import '@carbon/ibmdotcom-web-components/es/components/masthead/top-nav-menu.js';
import '@carbon/ibmdotcom-web-components/es/components/masthead/top-nav-menu-item.js';
import '@carbon/ibmdotcom-web-components/es/components/masthead/megamenu.js';
import '@carbon/ibmdotcom-web-components/es/components/masthead/megamenu-top-nav-menu.js';
import '@carbon/ibmdotcom-web-components/es/components/masthead/megamenu-category-group.js';
import '@carbon/ibmdotcom-web-components/es/components/masthead/megamenu-category-link.js';
import '@carbon/ibmdotcom-web-components/es/components/masthead/megamenu-link-with-icon.js';
import '@carbon/ibmdotcom-web-components/es/components/masthead/megamenu-left-navigation.js';
import '@carbon/ibmdotcom-web-components/es/components/masthead/megamenu-right-navigation.js';
import '@carbon/ibmdotcom-web-components/es/components/masthead/megamenu-overlay.js';
import '@carbon/ibmdotcom-web-components/es/components/masthead/left-nav.js';
import '@carbon/ibmdotcom-web-components/es/components/masthead/left-nav-item.js';
import '@carbon/ibmdotcom-web-components/es/components/masthead/left-nav-menu.js';
import '@carbon/ibmdotcom-web-components/es/components/masthead/left-nav-menu-item.js';
import '@carbon/ibmdotcom-web-components/es/components/masthead/left-nav-overlay.js';
import '@carbon/ibmdotcom-web-components/es/components/masthead/masthead-global-bar.js';
import '@carbon/ibmdotcom-web-components/es/components/masthead/masthead-profile.js';
import '@carbon/ibmdotcom-web-components/es/components/masthead/masthead-profile-item.js';
import '@carbon/ibmdotcom-web-components/es/components/masthead/masthead-search-container.js';
```

##### HTML

```html
<dds-masthead>
  <dds-masthead-menu-button></dds-masthead-menu-button>
  <dds-masthead-logo></dds-masthead-logo>
  <dds-top-nav menu-bar-label="IBM [Platform]">
    <dds-top-nav-menu menu-label="Products" trigger-content="Products">
      <dds-top-nav-menu-item href="https://www.ibm.com/products">Products</dds-top-nav-menu-item>
      <dds-top-nav-menu-item href="https://www.ibm.com/analytics">Analytics</dds-top-nav-menu-item>
      <dds-top-nav-menu-item href="https://www.ibm.com/blockchain">Blockchain</dds-top-nav-menu-item>
    </dds-top-nav-menu>
    <dds-top-nav-menu menu-label="Services" trigger-content="Services">
      <dds-top-nav-menu-item href="https://www-935.ibm.com/services/index.html">Services</dds-top-nav-menu-item>
      <dds-top-nav-menu-item href="https://www.ibm.com/financing">Financing</dds-top-nav-menu-item>
      <dds-top-nav-menu-item href="https://www.ibm.com/trailing">Training and skills</dds-top-nav-menu-item>
    </dds-top-nav-menu>
    <dds-top-nav-item href="https://www.ibm.com/industries">Industries</dds-top-nav-item>
  </dds-top-nav>
  <dds-masthead-search-container></dds-masthead-search-container>
  <dds-masthead-global-bar>
    <dds-masthead-profile authenticated>
      <dds-masthead-profile-item href="https://myibm.ibm.com/">My IBM</dds-masthead-profile-item>
      <dds-masthead-profile-item href="https://myibm.ibm.com/profile">Profile</dds-masthead-profile-item>
      <dds-masthead-profile-item href="https://myibm.ibm.com/pkmslogout?filename=accountRedir.html">
        Log out
      </dds-masthead-profile-item>
    </dds-masthead-profile>
  </dds-masthead-global-bar>
  <dds-left-nav-overlay></dds-left-nav-overlay>
  <dds-left-nav menu-bar-label="IBM [Platform]">
    <dds-left-nav-menu title="Products">
      <dds-left-nav-menu-item href="https://www.ibm.com/products">Products</dds-left-nav-menu-item>
      <dds-left-nav-menu-item href="https://www.ibm.com/analytics">Analytics</dds-left-nav-menu-item>
      <dds-left-nav-menu-item href="https://www.ibm.com/blockchain">Blockchain</dds-left-nav-menu-item>
    </dds-left-nav-menu>
    <dds-left-nav-menu title="Services">
      <dds-left-nav-menu-item href="https://www-935.ibm.com/services/index.html">Services</dds-left-nav-menu-item>
      <dds-left-nav-menu-item href="https://www.ibm.com/financing">Financing</dds-left-nav-menu-item>
      <dds-left-nav-menu-item href="https://www.ibm.com/trailing">Training and skills</dds-left-nav-menu-item>
    </dds-left-nav-menu>
    <dds-left-nav-item href="https://www.ibm.com/industries">Industries</dds-left-nav-item>
  </dds-left-nav>
</dds-masthead>
```

### `<dds-masthead>`

`<dds-masthead-logo>` works as the shell in masthead.

### `<dds-masthead-logo>`

`<dds-masthead-logo>` shows the IBM brand logo in masthead.

<Props of="dds-masthead-logo" />

### `<dds-masthead-menu-button>`

`<dds-masthead-menu-button>` works as the trigger button of the left nav in masthead. It's shown when the browser's screen real estate gets shrunk at the point where it's not meaningful to put the menu content in the header menu bar.

<Props of="dds-masthead-menu-button" />

### `<dds-masthead-profile>`

`<dds-masthead-profile>` works as the profile menu in masthead.

<Props of="dds-masthead-profile" />

### `<dds-masthead-profile-item>`

`<dds-masthead-profile-item>` works as a menu item in the profile menu in masthead.

<Props of="dds-masthead-profile-item" />

### `<dds-masthead-search-container>`

`<dds-masthead-search-container>` works as the search box in masthead, with default search API integration.

> ðŸ’¡ For manually handling the search query, please refer to `<dds-masthead-search>`/`<dds-masthead-search-item>` below.

### `<dds-masthead-search>`/`<dds-masthead-search-item>`

`<dds-masthead-search>` works as the search box in masthead.

The search box appears when user clicks on the magnifier icon.
The search box disappears when user clicks on the X button.

Fires an `dds-masthead-search-input` event when user types in a search query string.
Application code should take care of fulfilling the search result upon `dds-masthead-search-input` event, by putting `<dds-masthead-search-item text="The search result">` as the child elements of `<dds-masthead-search>`. Here's an exmaple:

```javascript
import throttle from 'lodash-es/throttle';

...

const items = [
  'IBM',
  'IBM Cloud',
  'IBM Watson',
];

function handleInput(searchQueryString) {
  const search = document.querySelector('dds-masthead-search');

  // First, clean up earlier search results
  while (search.firstChild) {
    search.removeChild(search.firstChild);
  }

  const results = !searchQueryString
    ? items
    : items.filter(item => item.toLowerCase().indexOf(searchQueryString.toLowerCase()) >= 0);
  // Iterate through the matching search results
  results.forEach(result => {
    // Create `<dds-masthead-search-item>`
    const searchItem = document.createElement('dds-masthead-search-item');
    // Sets the search result text
    searchItem.text = result;
    // Put `<dds-masthead-search-item>` as a child of `<dds-masthead-search>`
    search.appendChild(searchItem);
  });
}

const throttledHandleInput = throttle(handleInput);

document.querySelector('dds-masthead-search').addEventListener('dds-masthead-search-input', event => {
  throttledHandleInput(event.target.searchQueryString);
});
```

#### Attributes, properties and events of `<dds-masthead-search>`

<Props of="dds-masthead-search" />

#### Attributes and properties of `<dds-masthead-search-item>`

<Props of="dds-masthead-search-item" />

### `<dds-top-nav>`

`<dds-top-nav>` works as the top navigation bar in masthead.
The markup should be like:

```html
<dds-top-nav menu-bar-label="IBM [Platform]">
  <dds-top-nav-menu menu-label="Products" trigger-content="Products">
    <dds-top-nav-menu-item href="https://www.ibm.com/products">Products</dds-top-nav-menu-item>
    <dds-top-nav-menu-item href="https://www.ibm.com/analytics">Analytics</dds-top-nav-menu-item>
    <dds-top-nav-menu-item href="https://www.ibm.com/blockchain">Blockchain</dds-top-nav-menu-item>
  </dds-top-nav-menu>
  <dds-top-nav-menu menu-label="Services" trigger-content="Services">
    <dds-top-nav-menu-item href="https://www-935.ibm.com/services/index.html">Services</dds-top-nav-menu-item>
    <dds-top-nav-menu-item href="https://www.ibm.com/financing">Financing</dds-top-nav-menu-item>
    <dds-top-nav-menu-item href="https://www.ibm.com/trailing">Training and skills</dds-top-nav-menu-item>
  </dds-top-nav-menu>
  <dds-top-nav-item href="https://www.ibm.com/industries">Industries</dds-top-nav-item>
</dds-top-nav>
```

Or with the megamenu:

```html
<dds-top-nav menu-bar-label="IBM [Platform]">
  <dds-megamenu-top-nav-menu menu-label="Products" trigger-content="Products">
    <dds-megamenu-left-navigation>
      <dds-megamenu-category-group href="https://www.ibm.com/products" title="Top products & solutions">
        <dds-megamenu-category-link title="Db2" href="https://www.ibm.com/products"></dds-megamenu-category-link>
      </dds-megamenu-category-group>
      <dds-megamenu-category-group href="https://www.ibm.com/industries" title="Industries">
        <dds-megamenu-category-link
          title="Banking & financial markets"
          href="https://www.ibm.com/industries"
        ></dds-megamenu-category-link>
      </dds-megamenu-category-group>
    </dds-megamenu-left-navigation>
    <dds-megamenu-right-navigation
      style-scheme="left-section"
      view-all-href="https://www.ibm.com/products"
      view-all-title="View all products"
    >
      <dds-megamenu-category-group href="https://www.ibm.com/artificial-intelligence" title="Artificial intelligence">
        <dds-megamenu-category-link
          title="Customer service"
          href="https://www.ibm.com/cloud/ai/customer-service"
        ></dds-megamenu-category-link>
      </dds-megamenu-category-group>
      <dds-megamenu-category-group href="https://www.ibm.com/automation" title="Automation">
        <dds-megamenu-category-link
          title="Business process automation"
          href="https://www.ibm.com/automation/services"
        ></dds-megamenu-category-link>
      </dds-megamenu-category-group>
    </dds-megamenu-right-navigation>
  </dds-megamenu-top-nav-menu>
  <dds-megamenu-top-nav-menu menu-label="Services" trigger-content="Services">
    <dds-megamenu-right-navigation
      style-scheme="regular"
      view-all-href="https://www.ibm.com/services"
      view-all-title="View all services"
    >
      <dds-megamenu-category-group href="https://www.ibm.com/services/process" title="Business process services">
        <dds-megamenu-category-link
          title="Automation"
          href="https://www.ibm.com/automation/services"
        ></dds-megamenu-category-link>
      </dds-megamenu-category-group>
      <dds-megamenu-category-group href="https://www.ibm.com/services" title="Design & business strategy">
        <dds-megamenu-category-link
          title="Digital strategy"
          href="https://www.ibm.com/services/business/digital"
        ></dds-megamenu-category-link>
      </dds-megamenu-category-group>
    </dds-megamenu-right-navigation>
  </dds-megamenu-top-nav-menu>
</dds-top-nav>
```

<Props of="dds-top-nav" />

### `<dds-top-nav-item>`

`<dds-top-nav-item>` works as a regular top navigation bar item in masthead.

<Props of="dds-top-nav-item" />

### `<dds-top-nav-menu>`

`<dds-top-nav-menu>` works as a sub menu in the top navigation bar in masthead.

<Props of="dds-top-nav-menu" />

### `<dds-top-nav-menu-item>`

`<dds-top-nav-menu-item>` works as a sub menu item in the top navigation bar in masthead.

<Props of="dds-top-nav-menu-item" />

### `<dds-megamenu>`

`<dds-megamenu>` works as the menu content of a nav item in the top navigation bar in masthead.

On megamenu expand, the body scroll of the page should lock. Make sure to import the following stylesheet
to enable this feature.

```javascript
@import '@carbon/ibmdotcom-styles/scss/components/masthead/masthead-megamenu-scroll';
```

### `<dds-megamenu-top-nav-menu>`

`<dds-megamenu-nav-menu>` works as a sub menu specifically for megamenu content in the top navigation bar in masthead.

<Props of="dds-megamenu-top-nav-menu" />

### `<dds-megamenu-category-group>`

`<dds-megamenu-category-group>` is a container for the category title and category sublinks in the megamenu.

<Props of="dds-megamenu-category-group" />

### `<dds-megamenu-category-link>`

`<dds-megamenu-category-link>` is a sublink of a category in the megamenu.

<Props of="dds-megamenu-category-link" />

### `<dds-megamenu-link-with-icon>`

`<dds-megamenu-link-with-icon>` is a link with icon in the megamenu.

<Props of="dds-megamenu-link-with-icon" />

### `<dds-megamenu-left-navigation>`

`<dds-megamenu-left-navigation>` is the highlighted section containing categories that are highlighted in the megamenu.

### `<dds-megamenu-right-navigation>`

`<dds-megamenu-right-navigation>` is the section of the megamenu containing non-highlighted categories. This section
displays to the right of the highlighted section in the megamenu.

<Props of="dds-megamenu-right-navigation" />

### `<dds-megamenu-overlay>`

`<dds-megamenu-overlay>` is the overlay that appears when the megamenu is expanded.

<Props of="dds-megamenu-overlay" />

### `<dds-left-nav>`

`<dds-left-nav>` works as the left navigation bar in masthead.
The markup should be like:

```html
<dds-left-nav menu-bar-label="IBM [Platform]">
  <dds-left-nav-menu title="Products">
    <dds-left-nav-menu-item href="https://www.ibm.com/products">Products</dds-left-nav-menu-item>
    <dds-left-nav-menu-item href="https://www.ibm.com/analytics">Analytics</dds-left-nav-menu-item>
    <dds-left-nav-menu-item href="https://www.ibm.com/blockchain">Blockchain</dds-left-nav-menu-item>
  </dds-left-nav-menu>
  <dds-left-nav-menu title="Services">
    <dds-left-nav-menu-item href="https://www-935.ibm.com/services/index.html">Services</dds-left-nav-menu-item>
    <dds-left-nav-menu-item href="https://www.ibm.com/financing">Financing</dds-left-nav-menu-item>
    <dds-left-nav-menu-item href="https://www.ibm.com/trailing">Training and skills</dds-left-nav-menu-item>
  </dds-left-nav-menu>
  <dds-left-nav-item href="https://www.ibm.com/industries">Industries</dds-left-nav-item>
</dds-left-nav>
```

<Props of="dds-left-nav" />

### `<dds-left-nav-item>`

`<dds-left-nav-item>` works as a regular left navigation bar item in masthead.

<Props of="dds-left-nav-item" />

### `<dds-left-nav-menu>`

`<dds-left-nav-menu>` works as a sub menu in the left navigation bar in masthead.

<Props of="dds-left-nav-menu" />

### `<dds-left-nav-menu-item>`

`<dds-left-nav-menu-item>` works as a sub menu item in the left navigation bar in masthead.

<Props of="dds-left-nav-menu-item" />

### `<dds-left-nav-overlay>`

`<dds-left-nav-overlay>` works as the overlay that should be shown when the left nav is open.

<Props of="dds-left-nav-overlay" />
<Description markdown={contributing} />
