/**
 * Copyright IBM Corp. 2016, 2021
 *
 * This source code is licensed under the Apache-2.0 license found in the
 * LICENSE file in the root directory of this source tree.
 */

@import '../../globals/vars';
@import '../../globals/imports';
@import '../../globals/utils/ratio-base';
@import 'carbon-components/scss/components/slider/slider';

$aspect-ratios: ((16, 9), (9, 16), (2, 1), (1, 2), (4, 3), (3, 4), (1, 1));

@mixin audio-player {
  :host(#{$dds-prefix}-video-player),
  .#{$prefix}--audio-player {
    .#{$prefix}--description {
      display: flex;
      align-items: center;
      width: 25%;

      .#{$prefix}--image-container {
        width: 89px;
      }

      .#{$prefix}--image__img {
        width: 100%;
      }

      .#{$prefix}--audio-information {
        margin-left: $layout-01;

        &-title {
          font-weight: bold;
          word-wrap: break-word;
          flex: 1 1 auto;
          max-width: 165px;
        }
      }
    }

    .#{$prefix}--controls {
      display: flex;
      flex-direction: column;
      justify-content: center;
      width: 50%;

      .#{$prefix}--actions {
        display: flex;
        align-self: center;

        &-volume {
          display: flex;
          align-self: flex-end;
          .bx--form-item .bx--slider-container .bx--slider__range-label {
            display: none;
          }
          &-position {
            margin-top: 5px;
          }
        }

        &-controls {
          margin-right: 40px;

          &-move-back {
            padding-right: 40px;
          }

          &-move-forward,
          &-move-back {
            svg {
              transform: scale(1.58);
            }
          }

          &-pause {
            padding-right: 40px;

            svg {
              transform: scale(2);
            }
          }

          &-play {
            padding-right: 40px;

            svg {
              transform: scale(2);
            }
          }

          &-download {
            padding-right: 40px;

            svg {
              transform: scale(1.16);
            }
          }
        }
      }

      .#{$prefix}--audio-time {
        width: 100%;

        .bx--form-item .bx--slider-container {
          width: 100%;
        }
      }
    }

    .#{$prefix}--extra-metadata {
      width: 25%;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      position: relative;

      .bx--form-item .bx--select {
        width: 100%;
        .bx--select-input__wrapper {
          width: 100%;
          .bx--select-input {
            width: 100%;
          }

          svg.bx--select__arrow path {
            d: path(
              'M13 7L12.3 6.3 8.5 10.1 8.5 1 7.5 1 7.5 10.1 3.7 6.3 3 7 8 12zM13 12v2H3v-2H2v2l0 0c0 .6.4 1 1 1h10c.6 0 1-.4 1-1l0 0v-2H13z'
            );
          }
        }
      }

      &-transcript {
        border: solid 1px $interactive-02;
      }

      &-link {
        // margin: $spacing-03 0 $layout-01 $layout-01;
        color: $interactive-02;
      }

      &-icon {
        position: absolute;
        left: 0;
        // top: 15px;
      }
    }

    display: flex;
    justify-content: space-between;
    padding: $layout-01 0;
    // align-items: center
  }

  .#{$prefix}--audio-player__audio-container {
    @include carbon--theme($carbon--theme--g10, true);

    // position: fixed;
    width: 100%;
    // height: 100px;
    // bottom: 86px;
    background-color: $ui-background; /* Cool Gray 10 */
    border-top: 1px solid $ui-03; /* Cool Gray 20 */
  }

  // :host(#{$dds-prefix}-video-player) #{$dds-prefix}-image,
  // .#{$prefix}--video-player .#{$prefix}--image {
  //   width: 100%;
  //   height: 100%;
  // }

  .#{$prefix}--video-player__video-container {
    width: 100%;
    position: relative;
    display: inline-block;
    margin-top: $spacing-05;

    ::slotted(.#{$prefix}--audio-player),
    .#{$prefix}--video-player {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
    }

    @include ratio-base(16, 9, true);

    @each $aspect-ratio in $aspect-ratios {
      $width: nth($aspect-ratio, 1);
      $height: nth($aspect-ratio, 2);

      &.#{$prefix}--video-player__aspect-ratio {
        &--#{$width}x#{$height} {
          @include ratio-base($width, $height, true);
        }
      }
    }
  }

  .#{$prefix}--video-player__video-caption {
    @include carbon--type-style('caption-01');

    padding-top: var(--#{$dds-prefix}--video-caption--padding, $spacing-03);
    color: var(--#{$dds-prefix}--video-caption--color, $text-05);
    max-width: 90%;
  }

  .#{$prefix}--video-player__image-overlay {
    border: none;
    padding: 0;
    cursor: pointer;
    width: 100%;
    height: 100%;

    &:focus {
      outline: 3px solid $focus;
      outline-offset: 1px;
    }
  }
}

@include exports('audio-player') {
  @include audio-player;
}
