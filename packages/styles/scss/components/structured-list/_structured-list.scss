//
// Copyright IBM Corp. 2019, 2021
//
// This source code is licensed under the Apache-2.0 license found in the
// LICENSE file in the root directory of this source tree.
//

@import '../../globals/imports';
@import '../../globals/vars';
@import 'carbon-components/scss/components/structured-list/structured-list';
@import 'carbon-web-components/scss/components/structured-list/structured-list';

@include structured-list;

// Inherited Table Styles
:host(#{$dds-prefix}-structured-list) {
  @extend .#{$prefix}--structured-list;

  width: 100%;
}
:host(#{$dds-prefix}-structured-list-head) {
  @extend .#{$prefix}--structured-list-thead;
}
:host(#{$dds-prefix}-structured-list-header-row) {
  @extend .#{$prefix}--structured-list-row,
    .#{$prefix}--structured-list-row--header-row;
}
:host(#{$dds-prefix}-structured-list-header-cell) {
  @extend .#{$prefix}--structured-list-th;
}
:host(#{$dds-prefix}-structured-list-body) {
  @extend .#{$prefix}--structured-list-tbody;
}
:host(#{$dds-prefix}-structured-list-group) {
  display: contents;

  tr {
    @extend .#{$prefix}--structured-list-row;

    background-color: $ui-03;
    border-bottom: 1px solid $ui-03;
  }

  th {
    @extend .#{$prefix}--structured-list-td;

    text-align: left;
    font-weight: bold;
  }
}
:host(#{$dds-prefix}-structured-list-row) {
  @extend .#{$prefix}--structured-list-row;
}
:host(#{$dds-prefix}-structured-list-cell) {
  @extend .#{$prefix}--structured-list-td;
}

// Default Carbon Rows/Columns
:host(#{$dds-prefix}-structured-list-header-row),
:host(#{$dds-prefix}-structured-list-row),
:host(#{$dds-prefix}-structured-list-group) tr {
  @include carbon--breakpoint('sm') {
    @include carbon--make-row();

    flex-wrap: nowrap;
  }
}

:host(#{$dds-prefix}-structured-list-header-cell),
:host(#{$dds-prefix}-structured-list-cell),
:host(#{$dds-prefix}-structured-list-group) td {
  height: auto;

  @include carbon--breakpoint('sm') {
    @include carbon--make-col(2, 4);
  }

  @include carbon--breakpoint('md') {
    @include carbon--make-col(2, 8);
  }

  @include carbon--breakpoint('lg') {
    @include carbon--make-col(2, 16);
  }
}

// Overridden column spanning
@mixin structured-list-colspan($colNumber) {
  &:nth-child(#{$colNumber}) {
    --cols: var(--col-span-#{$colNumber}, 2);
    --width: calc((var(--cols) / var(--max-cols)) * 100%);

    max-width: var(--width);
    flex: 0 0 var(--width);
  }

  @include carbon--breakpoint('md') {
    &:nth-child(#{$colNumber}) {
      --cols: var(
        --col-span-md-#{$colNumber},
        var(--col-span-#{$colNumber}, 2)
      );
      --width: calc((var(--cols) / var(--max-cols)) * 100%);

      max-width: var(--width);
      flex: 0 0 var(--width);
    }
  }

  @include carbon--breakpoint('lg') {
    &:nth-child(#{$colNumber}) {
      --cols: var(
        --col-span-lg-#{$colNumber},
        var(--col-span-md-#{$colNumber}, var(--col-span-#{$colNumber}, 2))
      );
      --width: calc((var(--cols) / var(--max-cols)) * 100%);

      max-width: var(--width);
      flex: 0 0 var(--width);
    }
  }
}

:host(#{$dds-prefix}-structured-list-header-cell),
:host(#{$dds-prefix}-structured-list-cell) {
  --max-cols: 4;

  @include carbon--breakpoint('md') {
    --max-cols: 8;
  }

  @include carbon--breakpoint('lg') {
    --max-cols: 16;
  }

  @include structured-list-colspan(1);
  @include structured-list-colspan(2);
  @include structured-list-colspan(3);
  @include structured-list-colspan(4);
  @include structured-list-colspan(5);
  @include structured-list-colspan(6);
  @include structured-list-colspan(7);
  @include structured-list-colspan(8);

  &:last-child {
    flex-grow: 1;
    max-width: none;
  }
}
