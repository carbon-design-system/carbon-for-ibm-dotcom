/**
 * Copyright IBM Corp. 2016, 2023
 *
 * This source code is licensed under the Apache-2.0 license found in the
 * LICENSE file in the root directory of this source tree.
 */

@use 'sass:math';

@use '../../globals/vars' as *;
@use '@carbon/styles/scss/breakpoint' as *;
@use '@carbon/styles/scss/config' as *;
@use '@carbon/styles/scss/theme' as *;
@use '@carbon/styles/scss/type' as *;
@use '@carbon/styles/scss/utilities' as *;
@use '@carbon/styles/scss/spacing' as *;
@use '@carbon/styles/scss/components/modal' as *;
@use '../../../../carbon-web-components/src/components/modal/modal';

/// Expressive modal
/// @access private
/// @group expressive-modal

@mixin expressive-modal {
  $modal: '.#{$prefix}--modal';
  $button-size: 48px;
  $icon-size: 20px;
  $offset-close-icon: $spacing-07 -
    to-rem(math.div($button-size - $icon-size, 2));

  :host(#{$c4d-prefix}-expressive-modal) {
    @extend :host(#{$prefix}-modal);

    .#{$prefix}--modal-container {
      grid-template-rows: 1fr;
      padding: $spacing-05;
      min-height: $spacing-10 + to-rem($icon-size);

      @include breakpoint(md) {
        padding: $spacing-07;
      }
    }

    .#{$prefix}--modal-content {
      display: grid;
      grid-template-rows: auto 1fr auto;
      padding-bottom: 0;
    }

    .#{$c4d-prefix}-ce--modal__header--with-body {
      margin-bottom: $spacing-05;
    }

    .#{$c4d-prefix}-ce--modal__body {
      width: 100%;
    }

    .#{$c4d-prefix}-ce--modal__body--with-footer {
      margin-bottom: $spacing-09;
    }
  }

  :host(#{$c4d-prefix}-expressive-modal[open]) {
    @extend :host(#{$prefix}-modal[open]);
  }

  :host(#{$c4d-prefix}-expressive-modal-footer) .#{$prefix}--modal-footer {
    justify-content: flex-start;
    height: $spacing-09;
  }

  :host(#{$c4d-prefix}-expressive-modal-close-button) {
    .#{$prefix}--modal-close {
      position: fixed;
    }
  }

  :host(#{$c4d-prefix}-expressive-modal-heading),
  .#{$prefix}--modal--expressive .#{$prefix}--modal-content h1 {
    @include type-style('heading-04');
  }

  :host(#{$c4d-prefix}-expressive-modal-header) {
    display: block;
    padding: 0;
  }

  :host(#{$c4d-prefix}-expressive-modal-body),
  :host(#{$c4d-prefix}-lightbox-media-viewer-body) {
    @include type-style('body-02');
  }

  :host(#{$c4d-prefix}-expressive-modal)[expressive-size='full-width'],
  .#{$prefix}--modal--expressive--fullwidth {
    @include breakpoint(md) {
      .#{$prefix}--modal-container {
        width: calc(100% - #{$spacing-07});
        max-width: 96rem;
        height: calc(100% - #{$spacing-07});
        max-height: none;
      }
    }
  }

  :host(#{$c4d-prefix}-expressive-modal)[expressive-size='full-width'] {
    .#{$prefix}--modal-container {
      padding: 0;
    }

    .#{$prefix}--modal-content {
      padding: $spacing-05;

      @include breakpoint(md) {
        padding: $spacing-07;
      }
    }
  }

  :host(#{$c4d-prefix}-expressive-modal[size='full-width'])
    ::slotted(#{$c4d-prefix}-expressive-modal-body),
  :host(#{$c4d-prefix}-expressive-modal[size='full-width'])
    ::slotted(#{$c4d-prefix}-lightbox-media-viewer-body),
  .#{$prefix}--modal--expressive--fullwidth .#{$prefix}--modal-content {
    padding-right: 0;
    height: auto;
    min-height: to-rem(500px);
  }
}
