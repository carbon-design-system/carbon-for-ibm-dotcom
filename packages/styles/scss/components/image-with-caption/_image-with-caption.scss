/**
 * Copyright IBM Corp. 2016, 2023
 *
 * This source code is licensed under the Apache-2.0 license found in the
 * LICENSE file in the root directory of this source tree.
 */

@use '@carbon/styles/scss/breakpoint' as *;
@use '@carbon/styles/scss/config' as *;
@use '@carbon/styles/scss/motion' as *;
@use '@carbon/styles/scss/spacing' as *;
@use '@carbon/styles/scss/theme' as *;
@use '@carbon/styles/scss/type' as *;
@use '../../globals/vars' as *;
@use '../image';
@use '../lightbox-media-viewer/lightbox-media-viewer';

@mixin image-with-caption {
  .#{$prefix}--image-with-caption,
  :host(#{$dds-prefix}-image)[heading] {
    display: block;
    margin-top: $spacing-07;
    margin-bottom: $spacing-07;
    max-width: carbon--mini-units(80);

    @include breakpoint(md) {
      margin-top: $spacing-07;
      margin-bottom: $spacing-07;
    }
  }

  .#{$prefix}--image-with-caption__image {
    display: block;
    width: 100%;
    padding: 0;
    position: relative;
    pointer-events: none;
    border: none;
    background-color: transparent;

    &:hover {
      // only have lightbox functionality on bigger breakpoints
      @include breakpoint(md) {
        cursor: pointer;

        .#{$prefix}--image__img,
        #{$dds-prefix}-image {
          filter: brightness(80%);
        }

        .#{$prefix}--image-with-caption__zoom-button {
          background-color: rgba(0, 0, 0, 1);
        }
      }
    }

    &:hover,
    &:focus {
      // only have lightbox functionality on bigger breakpoints
      @include breakpoint(md) {
        outline: $spacing-01 solid $focus;
      }
    }
  }

  .#{$prefix}--image-with-caption__zoom-button {
    display: none;

    // only have lightbox functionality on bigger breakpoints
    @include breakpoint(md) {
      width: $spacing-09;
      height: $spacing-09;
      display: flex;
      position: absolute;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.5);

      svg {
        margin: auto;
        fill: $icon-on-color;
      }
    }
  }

  .#{$prefix}--image-with-caption__image,
  .#{$prefix}--image-with-caption__zoom-button {
    // only have lightbox functionality on bigger breakpoints
    @include breakpoint(md) {
      transition: $duration-moderate-01 motion(standard, productive);
      pointer-events: auto;
    }
  }

  .#{$prefix}--image__caption {
    @include type-style('caption-02');

    margin-top: $spacing-03;
    color: $text-helper;
  }
}
