//
// Copyright IBM Corp. 2019, 2023
//
// This source code is licensed under the Apache-2.0 license found in the
// LICENSE file in the root directory of this source tree.
//

$css--plex: true !default;

@use '@carbon/styles/scss/config' as *;
@use '@carbon/styles/scss/spacing' as *;
@use '@carbon/styles/scss/theme' as *;
@use '@carbon/styles/scss/utilities' as *;
@use '@carbon/styles/scss/components/list-box/list-box' as *;
@use '@carbon/styles/scss/components/dropdown' as *;
@use '@carbon/styles/scss/components/form';
@use '@carbon/styles/scss/components/checkbox';
@use '@carbon/styles/scss/components/tag';

// https://github.com/carbon-design-system/carbon/issues/11408
@include list-box;

:host(#{$prefix}-dropdown) {
  outline: none;

  .#{$prefix}--assistive-text {
    // Hides screen reader cursor
    left: -100%;
    top: -100%;
  }

  .#{$prefix}--label[hidden] {
    display: none;
  }

  .#{$prefix}--list-box__menu {
    top: 100%;
    margin-top: 1px;
    outline: 1px solid $focus;
  }

  &[open] {
    .#{$prefix}--list-box__field {
      outline: none;
    }
  }

  &[invalid] {
    .#{$prefix}--list-box__field {
      outline: none;
    }

    .#{$prefix}--form__helper-text {
      color: $text-error;
    }
  }

  &[read-only] {
    @extend .#{$prefix}--dropdown--readonly;

    .#{$prefix}--list-box {
      background-color: transparent;
      border-bottom-color: $border-subtle;
    }
  }

  &[direction='top'] {
    @extend .#{$prefix}--list-box--up;

    .#{$prefix}--list-box__menu {
      top: auto;
    }
  }

  &[type='inline'] {
    @extend .#{$prefix}--list-box__wrapper--inline;

    grid-gap: 0 $spacing-06;

    &[warn] {
      .#{$prefix}--list-box__field {
        padding-left: $spacing-05;
        padding-right: calc(#{$spacing-08} + #{$spacing-05});
      }
    }

    &[warn],
    &[invalid] {
      .#{$prefix}--form__helper-text {
        grid-column: 2;
      }
    }
  }
}

:host(#{$prefix}-dropdown-item) {
  @extend .#{$prefix}--list-box__menu-item;

  display: block;

  .#{$prefix}--list-box__menu-item__option {
    height: auto;
  }

  &[highlighted] {
    @extend .#{$prefix}--list-box__menu-item--highlighted;
  }

  &[disabled] {
    .#{$prefix}--list-box__menu-item__option {
      color: $text-disabled;
      text-decoration: none;
    }
  }

  &[selected] {
    @extend .#{$prefix}--list-box__menu-item--active;
    @extend .#{$prefix}--list-box__menu-item--highlighted;

    .#{$prefix}--list-box__menu-item__option {
      color: $text-primary;
    }

    .#{$prefix}--list-box__menu-item__selected-icon {
      display: block;
    }
  }

  &[size='sm'] {
    height: $spacing-07;

    .#{$prefix}--list-box__menu-item__option {
      padding-top: rem(7px);
      padding-bottom: rem(7px);
    }
  }

  &[size='lg'] {
    height: $spacing-09;

    .#{$prefix}--list-box__menu-item__option {
      padding-top: rem(15px);
      padding-bottom: rem(15px);
    }
  }
}

:host(#{$prefix}-dropdown-skeleton) {
  .#{$prefix}--skeleton {
    @include skeleton;
  }
}
